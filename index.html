<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Flashgordon by Androguide</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Flashgordon</h1>
        <h2>Edify to Bash parser and translator, in the form of an Android app allowing to flash zips without using the recovery</h2>
        <a href="https://github.com/Androguide/FlashGordon" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="flashgordon" class="anchor" href="#flashgordon"><span class="octicon octicon-link"></span></a>FlashGordon</h1>

<p>Edify to Bash parser and translator, in the form of an Android app allowing to flash zips without using the recovery</p>

<h2>
<a name="what-is-flash-gordon-" class="anchor" href="#what-is-flash-gordon-"><span class="octicon octicon-link"></span></a>What is Flash Gordon ?</h2>

<p>In laymen's words, Flash Gordon is an apk which allows you to flash any flashable zip (except for Roms) without having a recovery installed.
You just point it to the zip you want to flash, (be it a kernel, a mod, gapps...) and it will interpret the updater-script of this package and install its content just like a recovery would.</p>

<h2>
<a name="how-does-it-work-" class="anchor" href="#how-does-it-work-"><span class="octicon octicon-link"></span></a>How does it work ?</h2>

<p>Here is what happens step by step :</p>

<ul>
<li>You tap the "select a zip" button, select the built-in file explorer to select the zip you want to flash</li>
<li>Flash Gordon will first extract this zip, depending on its size it can take a little time</li>
<li>When you press the "Flash Now" button, Flash Gordon will locate the updater-script and start translating it into shell code, line by line</li>
<li>It will output the resulting translated bash script on your sdcard and execute it, thus installing the zip's content</li>
<li>The app creates a notification, just tap on it to reboot</li>
</ul><p>In order to achieve those last 2 steps, I'm writing a full Edify to Bash parser and translator.</p>

<p>Here is the list of all the Edify commands this parser can currently process and what their respective bash translation is (under each edify command), using examples:
(more will be added over time, this is really just a draft)</p>

<p><em>By no means am I a bash expert, so if you have suggestions for better bash equivalents of any edify commands please post them</em></p>

<pre><code>package_extract_file("path/to/source/file.txt", "/path/to/destination/file.txt");

busybox cp -fp /path/to/source/file.txt /path/to/destination/file.txt
</code></pre>

<h2></h2>

<pre><code>package_extract_dir("/source/folder", "/destination/folder");

busybox cp -rfp /source/folder/* /destination/folder
</code></pre>

<h2></h2>

<pre><code>set_perm(0, 2000, 0755, "/file/or/folder");

chown 0:2000 /file/or/folder
chmod 0755 /file/or/folder
</code></pre>

<h2></h2>

<pre><code>set_perm_recursive(0, 2000, 0644, 0755, "/path/to/set/permissions/recursively);

chown 0:2000 /path/to/set/permissions/recursively
chown 0:2000 /path/to/set/permissions
chown 0:2000 /path/to/set
chown 0:2000 /path/to
chown 0:2000 /path
chmod 0644 /path/to/set/permissions/recursively
chmod 0755 /path/to/set/permissions
chmod 0755 /path/to/set
chmod 0755 /path/to
chmod 0755 /path
</code></pre>

<h2></h2>

<pre><code>delete("file/to/delete");

busybox rm -f /file/to/delete
</code></pre>

<h2></h2>

<pre><code>run_program("/script/to/run.sh");

sh /script/to/run.sh
</code></pre>

<h2></h2>

<pre><code>mount("ext4", "EMMC", "/dev/block/mmcblk0p9", "/system");

busybox mount -o rw,remount -t auto /system (will soon change to -t mmcblk0p9 or whichever mount point is in the updater-script)
</code></pre>

<h2></h2>

<pre><code>unmount("/system");

busybox mount -o remount,ro /system
</code></pre>

<h2></h2>

<pre><code>symlink("busybox", "/system/xbin/[", "/system/xbin/[[",
    "/system/xbin/adjtimex", "/system/xbin/arp", "/system/xbin/ash",
    "/system/xbin/awk", "/system/xbin/base64", "/system/xbin/basename",
    "/system/xbin/bbconfig", "/system/xbin/blkid", "/system/xbin/blockdev",
    "/system/xbin/brctl", "/system/xbin/bunzip2", "/system/xbin/bzcat",
    "/system/xbin/bzip2", "/system/xbin/cal", "/system/xbin/cat",
    "/system/xbin/catv", "/system/xbin/chattr", "/system/xbin/chgrp",
    "/system/xbin/chmod", "/system/xbin/chown", "/system/xbin/chroot",
    "/system/xbin/clear", "/system/xbin/cmp", "/system/xbin/comm",
    "/as/many/lines/as/you/want");

ln -s busybox  /system/xbin/[ /system/xbin/[[
    /system/xbin/adjtimex /system/xbin/arp /system/xbin/ash
    /system/xbin/awk /system/xbin/base64 /system/xbin/basename
    /system/xbin/bbconfig /system/xbin/blkid /system/xbin/blockdev
    /system/xbin/brctl /system/xbin/bunzip2 /system/xbin/bzcat
    /system/xbin/bzip2 /system/xbin/cal /system/xbin/cat
    /system/xbin/catv /system/xbin/chattr /system/xbin/chgrp
    /system/xbin/chmod /system/xbin/chown /system/xbin/chroot
    /system/xbin/clear /system/xbin/cmp /system/xbin/comm
    /as/many/lines/as/you/want
</code></pre>

<h2></h2>

<pre><code>write_raw_image("/tmp/boot.img", "mmcblk0p5");
dd if=/tmp/boot.img of=/dev/block/mmcblk0p5
</code></pre>

<h2>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>This app depends on the following open source libraries: </p>

<ul>
<li><a href="https://github.com/Androguide/cardsui-for-android">My fork of of the CardsUI library by Nadav Fima</a></li>
<li><a href="https://github.com/iPaulPro/aFileChooser">aFileChooser by Paul Burke</a></li>
</ul><h2>
<a name="contribute" class="anchor" href="#contribute"><span class="octicon octicon-link"></span></a>Contribute</h2>

<p>You can discuss about this project on xda-developers.com at the following threads :</p>

<ul>
<li><a href="http://forum.xda-developers.com/showthread.php?t=2250555">General Thread</a></li>
<li><a href="http://forum.xda-developers.com/showthread.php?t=2250632">Development Thread</a></li>
</ul><p>If you want to contribute, please make a pull request or post your suggestions on the xda thread.</p>

<h2>
<a name="screenshots" class="anchor" href="#screenshots"><span class="octicon octicon-link"></span></a>Screenshots</h2>

<p><img src="http://imageshack.us/a/img259/3427/flash2r.png" alt="1"><img src="http://imageshack.us/a/img841/1894/flash3n.png" alt="2"><img src="http://imageshack.us/a/img818/1431/flash4.png" alt="3"><img src="http://imageshack.us/a/img707/4690/flash5t.png" alt="4"><img src="http://imageshack.us/a/img841/1416/flash6.png" alt="5"><img src="http://imageshack.us/a/img10/4111/flash8q.png" alt="6"><img src="http://imageshack.us/a/img690/8149/flash1bz.png" alt="7"><img src="http://img59.imageshack.us/img59/5444/flashib.png" alt="8"></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Androguide/FlashGordon/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Androguide/FlashGordon/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Androguide/FlashGordon"></a> is maintained by <a href="https://github.com/Androguide">Androguide</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>